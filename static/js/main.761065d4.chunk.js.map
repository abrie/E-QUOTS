{"version":3,"sources":["components/Landing/index.js","lib/compute/index.js","components/Card/index.js","lib/export/buildFilename.js","lib/export/buildEML.js","lib/export/buildHTML.js","lib/export/buildCSV.js","components/Exporter/index.js","lib/export/index.js","components/Selector/index.js","lib/loader/index.js","serviceWorker.js","index.js","App.js"],"names":["className","href","computeTotals","card","ledger","Object","values","reduce","acc","val","undefined","DispatchContext","React","createContext","Observable","state","handleChange","useContext","observable","type","name","value","onChange","Sections","sections","map","section","key","Totals","choiceSet","totals","data-count","length","choice","Section","header","Questions","questions","question","choiceCount","Question","text","Choices","choices","id","checked","htmlFor","Instructions","Reference","Title","number","title","instructions","Provider","pdf","Landing","buildFilename","date","extension","replace","year","getFullYear","month","getMonth","paddedMonth","day","getDate","paddedDay","buildEML","csvFilename","Date","template","Handlebars","compile","totalChoices","registerHelper","buildHTML","join","buildCSV","canRestore","doReset","doRestore","useState","active","setActive","useEffect","notEmpty","some","doExport","evt","filename","data","blob","Blob","window","navigator","msSaveOrOpenBlob","elem","document","createElement","URL","createObjectURL","download","body","appendChild","click","removeChild","upload","doPrint","print","disabled","onClick","cards","onChanged","selected","setSelected","find","handleSelection","currentTarget","SelectorItems","addIds","copy","JSON","parse","stringify","forEach","Array","from","ch","toLowerCase","filter","loadTemplate","makeLedger","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","setTemplate","setCard","cachedLedger","cacheLedger","useReducer","action","payload","initReducer","dispatch","dict","Templates","Exporter","blankLedger","Card","getElementById","process","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.761065d4.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./style.css\";\n\nexport default function() {\n  return (\n    <div className=\"landing\">\n      <h1 className=\"title\">Infection Control</h1>\n      <p>\n        Welcome to this implementation of the CDC's{\" \"}\n        <a href=\"https://www.cdc.gov/infectioncontrol/tools/quots.html\">\n          Quick Check Tools (QUOTS)\n        </a>\n        .\n      </p>\n      <p>\n        Use this tool to measure and encourage best practices in clinical\n        settings. It will help limit the spread of infectious agents.\n      </p>\n      <p>To get started, select a card from the header menu above.</p>\n      <p>\n        For technical information, see the&nbsp;\n        <a href=\"https://github.com/abrie/e-quots\">source code on Github.</a>\n      </p>\n    </div>\n  );\n}\n","function computeTotals({ card, ledger }) {\n  return Object.values(ledger).reduce((acc, val) => {\n    if (acc[val] === undefined) {\n      acc[val] = 1;\n    } else {\n      acc[val] = acc[val] + 1;\n    }\n    return acc;\n  }, {});\n}\n\nexport { computeTotals };\n","import React, { useContext } from \"react\";\nimport Landing from \"../Landing\";\nimport { computeTotals } from \"../../lib/compute\";\nimport \"./style.css\";\n\nconst DispatchContext = React.createContext(null);\n\nconst Observable = ({ card, state }) => {\n  const handleChange = useContext(DispatchContext);\n  return (\n    <div className=\"observable\">\n      <div className=\"observableLabel\">{card.observable}</div>\n      <div className=\"observableInput\">\n        <input\n          type=\"text\"\n          name=\"observable\"\n          value={state.observable}\n          onChange={handleChange}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst Sections = ({ sections, state }) => {\n  return sections.map((section, key) => {\n    return <Section section={section} key={key} state={state} />;\n  });\n};\n\nconst Totals = ({ card, ledger }) => {\n  const choiceSet = card.sections[0].choiceSet;\n  const totals = computeTotals({ card, ledger });\n\n  return (\n    <div className=\"total\">\n      <div className=\"totalText\">Total</div>\n      <div className=\"totalChoices\" data-count={choiceSet.length}>\n        {choiceSet.map((choice, key) => {\n          return (\n            <div className=\"totalChoice\" key={key}>\n              {totals[choice]}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst Section = ({ section, state }) => {\n  return (\n    <div className=\"section\">\n      <div className=\"sectionHeader\">{section.header}</div>\n      <div className=\"sectionQuestions\">\n        <Questions section={section} state={state} />\n      </div>\n    </div>\n  );\n};\n\nconst Questions = ({ section, state }) => {\n  return section.questions.map((question, key) => {\n    return (\n      <Question\n        question={question}\n        choiceCount={section.choiceSet.length}\n        key={key}\n        state={state}\n      />\n    );\n  });\n};\n\nconst Question = ({ question, choiceCount, state }) => {\n  return (\n    <div className=\"question\">\n      <div className=\"questionText\"> {question.text}</div>\n      <div className=\"questionChoices\" data-count={choiceCount}>\n        <Choices question={question} state={state} />\n      </div>\n    </div>\n  );\n};\n\nconst Choices = ({ question, state }) => {\n  const handleChange = useContext(DispatchContext);\n  return question.choices.map((choice, key) => {\n    const id = `${question.id}-${choice}`;\n    return (\n      <div className=\"questionChoice\" key={key}>\n        <input\n          type=\"radio\"\n          id={id}\n          name={question.id}\n          value={choice}\n          checked={state[question.id] === choice}\n          onChange={handleChange}\n        />\n        <label htmlFor={id}>{choice}</label>\n      </div>\n    );\n  });\n};\n\nconst Instructions = ({ text }) => {\n  return <div className=\"instructions\">{text}</div>;\n};\n\nconst Reference = ({ href }) => {\n  return (\n    <div className=\"reference\">\n      <a href={href}>Source PDF</a>\n    </div>\n  );\n};\n\nconst Title = ({ text, number }) => {\n  return (\n    <div className=\"title\">\n      <div className=\"titleText\">{text}</div>\n      <div className=\"titleNumber\">{number}</div>\n    </div>\n  );\n};\n\nexport default function({ card, ledger, onChange }) {\n  if (card) {\n    return (\n      <>\n        <Title text={card.title} number={card.number} />\n        <Instructions text={card.instructions} />\n        <DispatchContext.Provider value={onChange}>\n          <Observable card={card} state={ledger} />\n          <Sections sections={card.sections} state={ledger} />\n        </DispatchContext.Provider>\n        <Totals card={card} ledger={ledger} />\n        <Reference href={card.pdf} />\n      </>\n    );\n  } else {\n    return <Landing />;\n  }\n}\n","function buildFilename({ card, date, extension }) {\n  const name = card.name.replace(/ /gi, \"-\");\n  const year = date.getFullYear();\n  const month = `${date.getMonth() + 1}`;\n  const paddedMonth = month.length === 1 ? `0${month}` : month;\n  const day = `${date.getDate()}`;\n  const paddedDay = day.length === 1 ? `0${day}` : day;\n  return `equots-${year}-${paddedMonth}-${paddedDay}_${name}.${extension}`;\n}\n\nexport { buildFilename };\n","import { buildHTML } from \"./buildHTML\";\nimport { buildCSV } from \"./buildCSV\";\nimport { buildFilename } from \"./buildFilename\";\n\nfunction buildEML({ card, ledger }) {\n  const csvFilename = buildFilename({\n    card,\n    date: new Date(),\n    extension: \"csv\"\n  });\n\n  const eml = `\nSubject: QUOTS: ${card.name}\nX-Unsent: 1\nContent-Type: multipart/mixed; boundary=--boundary_text_string\n\nSee below for a copy of inspection results:\n\n----boundary_text_string\nContent-Type: text/html; charset=UTF-8\n\n${buildHTML({ card, ledger })}\n\n----boundary_text_string\nContent-Type: text/csv; charset=UTF-8; name=${csvFilename}\nContent-Disposition: attachment\n\n${buildCSV({ card, ledger })}\n\n----boundary_text_string--\n`;\n  return eml;\n}\n\nexport { buildEML };\n","import { computeTotals } from \"../compute\";\nimport Handlebars from \"handlebars\";\n\nfunction buildHTML({ card, ledger }) {\n  const definition = `\n  <html>\n  <head>\n    <style> td { border: 1px solid #444 } </style>\n  </head>\n  <body>\n  <h1>\n  {{card.observable }} : {{ledger.observable}}\n  </h1>\n  <table>\n  <thead>\n  <tr>\n  {{#each totalChoices}}\n  <th>\n  {{totalLabel .}}\n  </th>\n  {{/each}}\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n  {{#each totalChoices}}\n  <td>\n  {{totalValue .}}\n  </td>\n  {{/each}}\n  </tr>\n  </tbody>\n  </table>\n  {{#each card.sections}}\n  <table>\n  <thead>\n  <tr>\n    <th>{{header}}</th>\n    <th>Response</th>\n  </tr>\n  </thead>\n  <tbody>\n  {{#each questions}}\n  <tr>\n    <td>{{text}}</td>\n    <td>{{response id}}</td>\n  </tr>\n  {{/each}}\n  </tbody>\n  </table>\n  {{/each}}\n  </body>\n  </html>\n  `;\n\n  var template = Handlebars.compile(definition);\n  const totalChoices = [...card.sections[0].choiceSet, \"\"];\n  const totals = computeTotals({ card, ledger });\n\n  Handlebars.registerHelper(\"totalValue\", function(choice) {\n    const val = totals[choice];\n\n    switch (val) {\n      case undefined:\n        return 0;\n      default:\n        return val;\n    }\n  });\n\n  Handlebars.registerHelper(\"response\", function(id) {\n    return ledger[id];\n  });\n\n  Handlebars.registerHelper(\"totalLabel\", function(val) {\n    switch (val) {\n      case \"\":\n        return \"Unanswered\";\n      default:\n        return val;\n    }\n  });\n\n  const html = template({ card, ledger, totalChoices });\n\n  return html;\n}\n\nexport { buildHTML };\n","function buildCSV({ card, ledger }) {\n  const header = card.sections.reduce((acc, section) => {\n    return section.questions.reduce((acc, question) => {\n      return [...acc, `\"${question.text}\"`];\n    }, acc);\n  }, []);\n\n  const values = card.sections.reduce((acc, section) => {\n    return section.questions.reduce((acc, question) => {\n      return [...acc, ledger[question.id]];\n    }, acc);\n  }, []);\n\n  return [header.join(\",\"), values.join(\",\")].join(\"\\n\");\n}\n\nexport { buildCSV };\n","import React, { useEffect, useState } from \"react\";\nimport { upload, buildEML, buildFilename } from \"../../lib/export\";\nimport \"./style.css\";\n\nexport default function({ card, ledger, canRestore, doReset, doRestore }) {\n  const [active, setActive] = useState(false);\n\n  useEffect(() => {\n    const notEmpty = Object.values(ledger).some(val => val);\n    setActive(notEmpty);\n  }, [ledger]);\n\n  const doExport = evt => {\n    const date = new Date();\n    const extension = \"eml\";\n    const filename = buildFilename({ card, date, extension });\n    const type = \"text/plain\";\n    const data = buildEML({ card, ledger });\n    upload({ data, filename, type });\n  };\n\n  const doPrint = evt => {\n    window.print();\n  };\n\n  const RestoreMode = () => {\n    return (\n      <div className=\"controls\">\n        <button disabled={true} onClick={doExport}>\n          Email\n        </button>\n        <button disabled={true} onClick={doPrint}>\n          Print\n        </button>\n        <button className=\"normal\" onClick={() => doRestore()}>\n          Undo\n        </button>\n      </div>\n    );\n  };\n\n  const NormalMode = () => {\n    return (\n      <div className=\"controls\">\n        <button disabled={false} className=\"normal\" onClick={doExport}>\n          Email\n        </button>\n        <button disabled={false} className=\"normal\" onClick={doPrint}>\n          Print\n        </button>\n        <button disabled={false} className=\"warning\" onClick={() => doReset()}>\n          Reset\n        </button>\n      </div>\n    );\n  };\n\n  const EmptyMode = () => {\n    return (\n      <div className=\"controls\">\n        <button disabled={true} onClick={doExport}>\n          Email\n        </button>\n        <button disabled={true} onClick={doPrint}>\n          Print\n        </button>\n        <button disabled={true} onClick={() => doReset()}>\n          reset\n        </button>\n      </div>\n    );\n  };\n\n  if (canRestore) {\n    return <RestoreMode />;\n  } else if (active) {\n    return <NormalMode />;\n  } else {\n    return <EmptyMode />;\n  }\n}\n","import { buildEML } from \"./buildEML\";\nimport { buildFilename } from \"./buildFilename\";\n\nfunction upload({ data, filename, type }) {\n  const blob = new Blob([data], { type });\n\n  if (window.navigator.msSaveOrOpenBlob) {\n    window.navigator.msSaveOrOpenBlob(blob, filename);\n  } else {\n    var elem = window.document.createElement(\"a\");\n    elem.href = window.URL.createObjectURL(blob);\n    elem.download = filename;\n    document.body.appendChild(elem);\n    elem.click();\n    document.body.removeChild(elem);\n  }\n}\n\nexport { upload, buildEML, buildFilename };\n","import React, { useState, useEffect } from \"react\";\n\nexport default function({ cards, onChanged }) {\n  const [selected, setSelected] = useState(\"none\");\n\n  useEffect(() => {\n    onChanged(cards.find(card => `${card.name}` === selected));\n  }, [cards, selected, onChanged]);\n\n  const handleSelection = evt => {\n    const { value } = evt.currentTarget;\n    setSelected(value);\n  };\n\n  const Selector = ({ cards }) => {\n    return (\n      <select value={selected} onChange={handleSelection}>\n        <option value=\"none\">Select a card</option>\n        <SelectorItems cards={cards} />\n      </select>\n    );\n  };\n\n  const SelectorItems = ({ cards }) => {\n    return cards.map((card, key) => {\n      return (\n        <option key={key} value={card.name}>\n          {card.name}\n        </option>\n      );\n    });\n  };\n  if (cards) {\n    return <Selector cards={cards} />;\n  } else {\n    return <div>no cards</div>;\n  }\n}\n","function addIds(template) {\n  const toId = text =>\n    Array.from(text)\n      .map(ch => ch.toLowerCase())\n      .filter(ch => ch >= \"a\" && ch <= \"z\")\n      .join(\"\");\n\n  // Create a 'deep copy'\n  const copy = JSON.parse(JSON.stringify(template));\n\n  // Add id fields to the deep copy.\n  copy.sections.forEach(section => {\n    section.id = toId(section.header);\n    section.questions.forEach(question => {\n      question.id = Array.from(question.text)\n        .map(ch => ch.toLowerCase())\n        .filter(ch => ch >= \"a\" && ch <= \"z\")\n        .join(\"\");\n    });\n  });\n\n  return copy;\n}\n\nfunction makeLedger(template) {\n  const ledger = {};\n  template.sections.forEach(section => {\n    section.questions.forEach(question => {\n      ledger[question.id] = \"\";\n    });\n  });\n  ledger.observable = \"\";\n  return ledger;\n}\n\nfunction loadTemplate(template) {\n  const card = addIds(template);\n  const ledger = makeLedger(card);\n\n  return {\n    card,\n    ledger\n  };\n}\n\nexport { loadTemplate };\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","import React, { useState, useEffect, useReducer } from \"react\";\nimport Card from \"./components/Card\";\nimport Exporter from \"./components/Exporter\";\nimport Selector from \"./components/Selector\";\nimport Templates from \"./data/Cards\";\nimport { loadTemplate } from \"./lib/loader\";\nimport \"./App.css\";\n\nexport default function App() {\n  const [template, setTemplate] = useState(null);\n  const [card, setCard] = useState(null);\n  const [cachedLedger, cacheLedger] = useState(null);\n  const [ledger, dispatch] = useReducer(reducer, {}, initReducer);\n\n  function changeLedger(evt) {\n    const { name, value } = evt.currentTarget;\n    dispatch({ type: \"change\", payload: { name, value } });\n    cacheLedger(null);\n  }\n\n  function initReducer(dict) {\n    return { ...dict };\n  }\n\n  function resetLedger() {\n    cacheLedger({ ...ledger });\n    const { ledger: blankLedger } = loadTemplate(template);\n    dispatch({ type: \"initialize\", payload: blankLedger });\n  }\n\n  function restoreLedger() {\n    dispatch({ type: \"copy\", payload: { ledger: cachedLedger } });\n    cacheLedger(null);\n  }\n\n  function reducer(state, action) {\n    switch (action.type) {\n      case \"change\":\n        const { name, value } = action.payload;\n        return { ...state, [name]: value };\n      case \"initialize\":\n        const { ledger: blank } = loadTemplate(template);\n        return initReducer(blank);\n      case \"copy\":\n        const { ledger: copy } = action.payload;\n        return { ...copy };\n      default:\n        console.error(\n          `Unhandled reducer action.type: \"${action.type}\". Full action object is:`,\n          action\n        );\n        return undefined;\n    }\n  }\n\n  useEffect(() => {\n    if (template) {\n      const { card, ledger } = loadTemplate(template);\n      setCard(card);\n      dispatch({ type: \"initialize\", payload: ledger });\n    }\n  }, [template]);\n\n  return (\n    <div className=\"app\">\n      <div className=\"header\">\n        <Selector cards={Templates.cards} onChanged={setTemplate} />\n        <Exporter\n          card={card}\n          ledger={ledger}\n          canRestore={cachedLedger !== null}\n          doReset={resetLedger}\n          doRestore={restoreLedger}\n        />\n      </div>\n      <div className=\"card\">\n        <Card card={card} ledger={ledger} onChange={changeLedger} />\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}